spring:
  application:
    name: deepmirror

  # 데이터베이스 연결 설정
  datasource:
    # 'db'는 docker-compose.yml에서 정한 서비스 이름입니다 (Docker DNS)
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
    driver-class-name: org.postgresql.Driver

  # JPA (DB 테이블 자동 생성)
  jpa:
    hibernate:
      ddl-auto: ${JPA_DDL_AUTO:update}  # 개발: update, 프로덕션: validate/none
    show-sql: true      # 실행되는 SQL을 로그에 보여줌 (디버깅용)
    properties:
      hibernate:
        format_sql: true # SQL 예쁘게 정렬해서 보여줌

  # Spring AI 설정 (Gemini)
  ai:
    gemini:
      api-key: ${GEMINI_API_KEY}
      chat:
        options:
          model: gemini-3-flash-preview
          temperature: 0.7

# Discord Webhook 설정
discord:
  webhook-url: ${DISCORD_WEBHOOK_URL:}

  # 프로덕션 보안 설정
  devtools:
    restart:
      enabled: false

server:
  port: 8080
  error:
    include-message: never
    include-stacktrace: never
    whitelabel:
      enabled: false

# SpringDoc OpenAPI (Swagger UI) 설정
springdoc:
  api-docs:
    path: /api-docs  # OpenAPI JSON 문서 경로
  swagger-ui:
    path: /swagger-ui.html  # Swagger UI 경로 (기본값)
    display-request-duration: true  # 요청 실행 시간 표시
    groups-order: DESC  # API 그룹 정렬 순서